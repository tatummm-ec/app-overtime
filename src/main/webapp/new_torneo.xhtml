<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Nuevo Torneo - OverTime</title>
    <style>
        body {
            background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }

        .card {
            background-color: #fff;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 500px;
        }

        h2 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .button-secondary {
            background-color: #999 !important;
            color: white !important;
        }

        .button-primary {
            background-color: #ff6600 !important;
            color: white !important;
        }

        .add-button {
            background-color: #0066cc !important;
            color: white !important;
        }
    </style>
</h:head>

<h:body>
    <div class="container">
        <h:form>
            <div class="card">

                <h2>Crear Nuevo Torneo</h2>

                <p:messages id="messages" showDetail="true" closable="true">
                    <p:autoUpdate />
                </p:messages>

                <p:inputText
                        value="#{torneoBean.nombreTorneo}"
                        placeholder="Nombre del Torneo"
                        style="width:100%; margin-bottom:1.5rem;"
                        required="true"
                        requiredMessage="El nombre del torneo es obligatorio" />

                <div style="display: flex; flex-direction: column; gap: 1.5rem; margin-bottom: 2rem;">
                    <p:calendar
                            value="#{torneoBean.fechaInicio}"
                            pattern="dd/MM/yyyy"
                            placeholder="Fecha de Inicio"
                            required="true"
                            requiredMessage="La fecha de inicio es obligatoria"
                            style="width:100%;" />

                    <p:calendar
                            value="#{torneoBean.fechaFin}"
                            pattern="dd/MM/yyyy"
                            placeholder="Fecha de Fin"
                            required="true"
                            requiredMessage="La fecha de fin es obligatoria"
                            style="width:100%;" />
                </div>

                <h3 style="margin-bottom:1rem;">Equipos participantes</h3>

                <p:commandButton
                        value="Agregar Equipo"
                        icon="pi pi-plus"
                        action="#{torneoBean.agregarEquipo}"
                        update="@form"
                        styleClass="add-button"
                        style="margin-bottom: 1rem;" />

                <ui:repeat value="#{torneoBean.equiposTemporales}" var="equipo" varStatus="i">
                    <p:inputText
                            value="#{equipo.nombre}"
                            placeholder="Nombre del equipo #{i.index + 1}"
                            style="width:100%; margin-bottom:0.5rem;"
                            required="true"
                            requiredMessage="El nombre del equipo #{i.index + 1} es obligatorio">
                        <p:ajax event="blur" update="@form" />
                    </p:inputText>
                </ui:repeat>

                <p:commandButton
                        value="Crear Torneo"
                        action="#{torneoBean.crearTorneo}"
                        icon="pi pi-check"
                        ajax="false"
                        styleClass="button-primary"
                        style="width:100%; font-weight:bold; margin-top:2rem;" />

                <p:commandButton
                        value="Volver a Inicio"
                        action="home.xhtml?faces-redirect=true"
                        icon="pi pi-arrow-left"
                        styleClass="button-secondary"
                        style="width:100%; font-weight:bold; margin-top:1rem;" />
            </div>
        </h:form>
    </div>
</h:body>
</html>
