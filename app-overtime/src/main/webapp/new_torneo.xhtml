<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/WEB-INF/templates/base.xhtml">

    <ui:define name="title-view">
        Nuevo Torneo - OverTime
    </ui:define>

    <ui:define name="content">
        <h:form style="width:100%; max-width:500px;">
            <div style="background-color:#fff; padding:2rem; border-radius:1rem; box-shadow:0 0 10px rgba(0,0,0,0.1); width:100%;">

                <h2 style="text-align:center; margin-bottom:2rem;">Crear Nuevo Torneo</h2>

                <p:messages id="messages" showDetail="true" closable="true">
                    <p:autoUpdate/>
                </p:messages>

                <p:inputText
                        value="#{torneoBean.nombreTorneo}"
                        placeholder="Nombre del Torneo"
                        style="width:100%; margin-bottom:1.5rem;"
                        required="true"
                        requiredMessage="El nombre del torneo es obligatorio"/>

                <div style="display: flex; flex-direction: column; gap: 1.5rem; margin-bottom: 2rem;">
                    <p:calendar
                            value="#{torneoBean.fechaInicio}"
                            pattern="dd/MM/yyyy"
                            placeholder="Fecha de Inicio"
                            required="true"
                            requiredMessage="La fecha de inicio es obligatoria"
                            style="width:100%;" />

                    <p:calendar
                            value="#{torneoBean.fechaFin}"
                            pattern="dd/MM/yyyy"
                            placeholder="Fecha de Fin"
                            required="true"
                            requiredMessage="La fecha de fin es obligatoria"
                            style="width:100%;" />
                </div>

                <h3 style="margin-bottom:1rem;">Equipos participantes</h3>

                <div style="display:flex; gap:1rem; margin-bottom:1rem;">
                    <p:inputText value="#{torneoBean.nombreEquipoTemp}"
                                 placeholder="Nuevo equipo"
                                 style="flex:1;" />

                    <p:commandButton
                            value="+"
                            action="#{torneoBean.agregarEquipo}"
                            update="@form"
                            style="background-color:#0066cc; color:white;" />
                </div>

                <ui:repeat value="#{torneoBean.nombresEquipos}" var="equipoNombre" varStatus="i">
                    <p:inputText
                            value="#{torneoBean.nombresEquipos[i.index]}"
                            placeholder="Nombre del equipo #{i.index + 1}"
                            style="width:100%; margin-bottom:0.5rem;"
                            required="true"
                            requiredMessage="El nombre del equipo #{i.index + 1} es obligatorio" />
                </ui:repeat>

                <p:commandButton
                        value="Crear Torneo"
                        action="#{torneoBean.crearTorneo}"
                        icon="pi pi-check"
                        ajax="false"
                        style="width:100%; background-color:#ff6600; color:white; font-weight:bold; margin-top:2rem;" />
            </div>
        </h:form>
    </ui:define>

</ui:composition>
</html>
